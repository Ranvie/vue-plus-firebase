(function(){"use strict";var e={2938:function(e,t,r){var a=r(9242),n=r(3396);function o(e,t,r,a,o,s){const i=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)(i)}var s={name:"App"},i=r(89);const u=(0,i.Z)(s,[["render",o]]);var l=u,d=r(2483),c=r(7139),p=r.p+"img/Reload.6948dd5d.svg";const m=e=>((0,n.dD)("data-v-92610b5a"),e=e(),(0,n.Cn)(),e),h={class:"container"},b=(0,n.uE)('<table data-v-92610b5a><tr data-v-92610b5a><td data-v-92610b5a><input type="text" placeholder="Name" name="name" tabindex="2" data-v-92610b5a></td><td data-v-92610b5a><input type="text" placeholder="Description" name="description" tabindex="2" data-v-92610b5a></td><td data-v-92610b5a><input type="number" placeholder="Price" name="price" min="0" step=".01" tabindex="2" data-v-92610b5a></td><td data-v-92610b5a><input type="number" placeholder="Stock" name="stock" min="0" tabindex="2" data-v-92610b5a></td></tr></table><button class="saveButton" type="submit" tabindex="2" data-v-92610b5a>Save</button>',2),g=[b],v=m((()=>(0,n._)("div",{class:"marginTop30"},null,-1))),f={class:"reloadButton"},y={id:"showProducts"},w=m((()=>(0,n._)("footer",null,null,-1)));function S(e,t,r,o,s,i){const u=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("header",null,[(0,n.Wm)(u,{to:"/login",tabindex:"1"},{default:(0,n.w5)((()=>[(0,n.Uk)("Login")])),_:1})]),(0,n._)("main",null,[(0,n._)("div",h,[e.isAdmin?((0,n.wg)(),(0,n.iD)("form",{key:0,id:"createEntry",onSubmit:t[0]||(t[0]=(0,a.iM)(((...t)=>e.handleSubmit&&e.handleSubmit(...t)),["prevent"]))},g,32)):(0,n.kq)("",!0),v,(0,n._)("button",f,[(0,n._)("img",{src:p,title:"Reload products",alt:"Reload all products from table",onClick:t[1]||(t[1]=t=>e.getProducts(!0)),tabindex:"2"})]),(0,n._)("table",y,[(0,n._)("tr",null,[(0,n._)("th",{onClick:t[2]||(t[2]=t=>e.getProducts(!1,"name")),onKeyup:t[3]||(t[3]=(0,a.D2)((t=>e.getProducts(!1,"name")),["enter"])),tabindex:"2"},"Name",32),(0,n._)("th",{onClick:t[4]||(t[4]=t=>e.getProducts(!1,"description")),onKeyup:t[5]||(t[5]=(0,a.D2)((t=>e.getProducts(!1,"description")),["enter"])),tabindex:"2"},"Description",32),(0,n._)("th",{onClick:t[6]||(t[6]=t=>e.getProducts(!1,"price")),onKeyup:t[7]||(t[7]=(0,a.D2)((t=>e.getProducts(!1,"price")),["enter"])),tabindex:"2"},"Price",32),(0,n._)("th",{onClick:t[8]||(t[8]=t=>e.getProducts(!1,"stock")),onKeyup:t[9]||(t[9]=(0,a.D2)((t=>e.getProducts(!1,"stock")),["enter"])),tabindex:"2"},"Stock",32)]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.products,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{key:t},[(0,n._)("td",null,(0,c.zw)(e.name),1),(0,n._)("td",null,(0,c.zw)(e.description),1),(0,n._)("td",null,"$"+(0,c.zw)(Number.parseFloat(e.price).toFixed(2).toString()),1),(0,n._)("td",null,(0,c.zw)(e.stock),1)])))),128))])])]),w],64)}r(7658);var _=r(7795),D=r(3854),k=r(36);const x={apiKey:"AIzaSyDoiLi4udd54j5D667BinmxdlG3Ed9-hJ0",authDomain:"portfolio-a9d90.firebaseapp.com",projectId:"portfolio-a9d90",storageBucket:"portfolio-a9d90.appspot.com",messagingSenderId:"2268230381",appId:"1:2268230381:web:3cf52911ac68e35a1a12e4"},I=(0,_.ZF)(x),O=(0,D.v0)(I),P=(0,k.ad)(I);class T{getKeyValue(e,t=""){if(""===t)return e;let r=t.split(/\[([\d]+)\]|\./).filter((e=>void 0!=e&&""!=e)),a=e[r[0]],n=!0;for(let o of r)if(n)n=!1;else{if(void 0===a)break;a=a[o]}return a}}var L=new T;class N{constructor(){}getItem(e){return localStorage.getItem(e)}getKey(e,t){let r=JSON.parse(localStorage.getItem(e));return L.getKeyValue(r,t)}removeItem(e){localStorage.removeItem(e)}isExpired(e){let t=new Date(this.getKey(e,"expire")).toLocaleString("sv"),r=(new Date).toLocaleString("sv");return r>t}setItem(e,t,r=""){localStorage.setItem(e,JSON.stringify({value:t,expire:this.expireDate(r)}))}expireDate(e){return e=e.split(/(\D+|\d+)/g).filter((e=>""!=e)),this.parseToDateFromNow(e[0],e[1]).toLocaleString("sv")}parseToDateFromNow(e,t){let r=new Date;switch(e=Number.parseInt(e),t){case"s":r.setSeconds(r.getSeconds()+e);break;case"m":r.setMinutes(r.getMinutes()+e);break;case"h":r.setHours(r.getHours()+e);break;case"D":r.setHours(r.getHours()+24*e);break;case"M":r.setMonth(r.getMonth()+e);break;case"Y":r.setFullYear(r.getFullYear()+e);break}return r}}var F=new N;class A{possibleTypes(e=""){const t=/^[0-9]+$/,r=/^-?\d+(?:[.,]\d+)?$/,a=/^(?:true|false|0|1)$/,n=/^(\d{4})-(\d{2})-(\d{2})\s+(\d{2}):(\d{2}):(\d{2})$/;let o=["STRING"];return t.test(e)&&o.push("INT"),r.test(e)&&o.push("FLOAT"),a.test(e.toLowerCase())&&o.push("BOOLEAN"),n.test(e)&&o.push("DATE"),o}}var E=new A;class C{sort(e,t){let r=e;return r.sort(((e,r)=>this.isNumber(e[t])?this.evaluateHigher(Number.parseFloat(e[t]),Number.parseFloat(r[t])):e[t].localeCompare(r[t],"sv"))),r}isNumber(e){return E.possibleTypes(e).includes("INT")||E.possibleTypes(e).includes("FLOAT")}evaluateHigher(e,t){return e>t?1:e<t?-1:0}}var H=new C;class K{isDataExistsAndNotExpiredLocal(e){return F.getItem(e)&&!F.isExpired(e)}saveToDatabase(e,t,r,a){return new Promise(((n,o)=>{(0,k.pl)((0,k.JU)(e,t,r),{...a}).then((()=>{n(a)})).catch((e=>{o(e)}))}))}deleteFromDatabase(e,t,r){return new Promise(((a,n)=>{(0,k.oe)((0,k.JU)(e,t,r)).then((()=>{a()})).catch((e=>{n(e)}))}))}deleteFromLocalStorage(e){localStorage.removeItem(e)}readFromDatabase(e,t,r="",a=10,n="",o=""){return new Promise(((s,i)=>{let u=[];const l=this.createQueryString(e,t,r,a,n,o);(0,k.PL)(l).then((e=>{e.forEach((e=>{u.push(e.data())})),s(u)})).catch((e=>{i(e)}))}))}createQueryString(e,t,r="",a=10,n="",o){const s=(0,k.hJ)(e,t);return""!=r&&""!=n&&"AFTER"==o?(0,k.IO)(s,(0,k.Xo)(r),(0,k.TQ)(n),(0,k.b9)(a)):""!=r&&""!=n&&"AT"==o?(0,k.IO)(s,(0,k.Xo)(r),(0,k.e0)(n),(0,k.b9)(a)):""!=r&&""==n?(0,k.IO)(s,(0,k.Xo)(r),(0,k.b9)(a)):(0,k.IO)(s,(0,k.b9)(a))}readFromDatabaseCaching(e,t,r="",a=10,n="",o="",s,i=""){return new Promise(((u,l)=>{this.readFromDatabase(e,t,r,a,n,o).then((e=>{F.setItem(s,e,i),u(e)})).catch((e=>{l(e)}))}))}readFromLocalStorage(e,t="",r="value"){return""!=t?this.orderLocalStorage(e,t,r):JSON.parse(F.getKey(e,r))}orderLocalStorage(e,t,r="value"){let a=F.getKey(e,r);"string"===typeof a&&(a=JSON.parse(a));let n=H.sort(a,t);return n}}var V=new K;class j{getProductList(e,t){let r=[],a=[];return e.forEach((e=>{r=JSON.parse(e.products),a=r})),H.sort(a,t)}}var J=new j,U={data(){return{products:[],isAdmin:!1,lastVisible:{}}},mounted(){this.isUserAdmin(),this.getProducts()},methods:{async isUserAdmin(){O.onAuthStateChanged((e=>{null!==O.currentUser?e.getIdTokenResult(!0).then((e=>{this.isAdmin=!0===e.claims.admin})):this.isAdmin=!1}))},handleSubmit(e){if(this.isAdmin){this.convertSubmitToProduct(e)}else le.push({name:"Login"})},convertSubmitToProduct(e){let t={};for(let r of e.target)"input"===r.localName&&(t[r.name]=r.value);return t},async getProducts(e=!1,t="name"){!e&&V.isDataExistsAndNotExpiredLocal("products")?this.products=V.readFromLocalStorage("products",t,"value[0].products"):V.readFromDatabaseCaching(P,"products","id",1,"products_0","AT","products","1h").then((e=>{this.products=J.getProductList(e,t)}))}}};const Y=(0,i.Z)(U,[["render",S],["__scopeId","data-v-92610b5a"]]);var M=Y;const z=e=>((0,n.dD)("data-v-7fe0f50e"),e=e(),(0,n.Cn)(),e),R=z((()=>(0,n._)("header",null,null,-1))),Z=z((()=>(0,n._)("h1",{class:"centralize"},"Login",-1))),$=z((()=>(0,n._)("hr",null,null,-1))),B={class:"grid"},Q=z((()=>(0,n._)("button",{type:"submit"},"Enviar",-1))),X=z((()=>(0,n._)("footer",null,null,-1)));function G(e,t,r,o,s,i){const u=(0,n.up)("CustomInput");return(0,n.wg)(),(0,n.iD)(n.HY,null,[R,(0,n._)("main",null,[(0,n._)("form",{onSubmit:t[0]||(t[0]=(0,a.iM)(((...t)=>e.handleSubmit&&e.handleSubmit(...t)),["prevent"]))},[Z,$,(0,n._)("div",B,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.inputs,((e,t)=>((0,n.wg)(),(0,n.j4)(u,{key:t,label:e.label,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,type:e.type},null,8,["label","modelValue","onUpdate:modelValue","type"])))),128))]),Q],32)]),X],64)}const q=["for"],W=["id","type"];function ee(e,t,r,o,s,i){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("label",{for:e.label},(0,c.zw)(e.label),9,q),(0,n.wy)((0,n._)("input",{id:e.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.content=t),type:e.type},null,8,W),[[a.YZ,e.content]])],64)}var te={props:{label:String,modelValue:String,type:String,placeholder:String},computed:{content:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}};const re=(0,i.Z)(te,[["render",ee],["__scopeId","data-v-a7f8322e"]]);var ae=re,ne={data(){return{inputs:{email:{label:"Email",value:"",type:"email"},password:{label:"Password",value:"",type:"password"}}}},components:{CustomInput:ae},methods:{handleSubmit(){this.tryToLogin(this.inputs.email.value,this.inputs.password.value)},tryToLogin(e,t){(0,D.e5)(O,e,t).then((()=>{le.push({name:"Home"})})).catch((e=>{"auth/user-not-found"==e.code||"auth/wrong-password"==e.code?alert("O Email ou a Senha est√£o incorretos."):alert("Ocorreu um erro. Tente novamente mais tarde.")}))}}};const oe=(0,i.Z)(ne,[["render",G],["__scopeId","data-v-7fe0f50e"]]);var se=oe;const ie=[{path:"/",name:"Home",component:M},{path:"/login",name:"Login",component:se}],ue=(0,d.p7)({history:(0,d.PO)("/vue-plus-firebase/"),routes:ie});var le=ue;(0,a.ri)(l).use(le).mount("#app")}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(t,a,n,o){if(!a){var s=1/0;for(d=0;d<e.length;d++){a=e[d][0],n=e[d][1],o=e[d][2];for(var i=!0,u=0;u<a.length;u++)(!1&o||s>=o)&&Object.keys(r.O).every((function(e){return r.O[e](a[u])}))?a.splice(u--,1):(i=!1,o<s&&(s=o));if(i){e.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,n,o]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.p="/vue-plus-firebase/"}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,o,s=a[0],i=a[1],u=a[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(u)var d=u(r)}for(t&&t(a);l<s.length;l++)o=s[l],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(d)},a=self["webpackChunkvue_auth"]=self["webpackChunkvue_auth"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(2938)}));a=r.O(a)})();
//# sourceMappingURL=app.f047b74d.js.map