(function(){"use strict";var e={4371:function(e,t,n){var r=n(9242),a=n(3396);function o(e,t,n,r,o,i){const s=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(s)}var i={name:"App"},s=n(89);const u=(0,s.Z)(i,[["render",o]]);var l=u,d=n(2483),c=n(7139),p=n.p+"img/Reload.6948dd5d.svg";const m=e=>((0,a.dD)("data-v-a75c5e9e"),e=e(),(0,a.Cn)(),e),h={class:"container"},g=(0,a.uE)('<table data-v-a75c5e9e><tr data-v-a75c5e9e><td data-v-a75c5e9e><input type="text" placeholder="Name" name="name" tabindex="2" data-v-a75c5e9e></td><td data-v-a75c5e9e><input type="text" placeholder="Description" name="description" tabindex="2" data-v-a75c5e9e></td><td data-v-a75c5e9e><input type="number" placeholder="Price" name="price" min="0" step=".01" tabindex="2" data-v-a75c5e9e></td><td data-v-a75c5e9e><input type="number" placeholder="Stock" name="stock" min="0" tabindex="2" data-v-a75c5e9e></td></tr></table><button type="submit" tabindex="2" data-v-a75c5e9e>Save</button>',2),v=[g],b=m((()=>(0,a._)("div",{class:"marginTop30"},null,-1))),f={class:"reloadButton"},y={id:"showProducts"},w=m((()=>(0,a._)("footer",null,null,-1)));function S(e,t,n,o,i,s){const u=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("header",null,[(0,a.Wm)(u,{to:"/login",tabindex:"1"},{default:(0,a.w5)((()=>[(0,a.Uk)("Login")])),_:1})]),(0,a._)("main",null,[(0,a._)("div",h,[e.isAdmin?((0,a.wg)(),(0,a.iD)("form",{key:0,id:"createEntry",onSubmit:t[0]||(t[0]=(0,r.iM)(((...t)=>e.handleSubmit&&e.handleSubmit(...t)),["prevent"]))},v,32)):(0,a.kq)("",!0),b,(0,a._)("button",f,[(0,a._)("img",{src:p,title:"Reload products",alt:"Reload all products from table",onClick:t[1]||(t[1]=t=>e.getProducts(!0)),tabindex:"2"})]),(0,a._)("table",y,[(0,a._)("tr",null,[(0,a._)("th",{onClick:t[2]||(t[2]=t=>e.getProducts(!1,"name")),onKeyup:t[3]||(t[3]=(0,r.D2)((t=>e.getProducts(!1,"name")),["enter"])),tabindex:"2"},"Name",32),(0,a._)("th",{onClick:t[4]||(t[4]=t=>e.getProducts(!1,"description")),onKeyup:t[5]||(t[5]=(0,r.D2)((t=>e.getProducts(!1,"description")),["enter"])),tabindex:"2"},"Description",32),(0,a._)("th",{onClick:t[6]||(t[6]=t=>e.getProducts(!1,"price")),onKeyup:t[7]||(t[7]=(0,r.D2)((t=>e.getProducts(!1,"price")),["enter"])),tabindex:"2"},"Price",32),(0,a._)("th",{onClick:t[8]||(t[8]=t=>e.getProducts(!1,"stock")),onKeyup:t[9]||(t[9]=(0,r.D2)((t=>e.getProducts(!1,"stock")),["enter"])),tabindex:"2"},"Stock",32)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.products,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,c.zw)(e.name),1),(0,a._)("td",null,(0,c.zw)(e.description),1),(0,a._)("td",null,"$"+(0,c.zw)(Number.parseFloat(e.price).toFixed(2).toString()),1),(0,a._)("td",null,(0,c.zw)(e.stock),1)])))),128))])])]),w],64)}n(7658);var _=n(7795),k=n(3854),D=n(36);const x={apiKey:"AIzaSyDoiLi4udd54j5D667BinmxdlG3Ed9-hJ0",authDomain:"portfolio-a9d90.firebaseapp.com",projectId:"portfolio-a9d90",storageBucket:"portfolio-a9d90.appspot.com",messagingSenderId:"2268230381",appId:"1:2268230381:web:3cf52911ac68e35a1a12e4"},I=(0,_.ZF)(x),P=(0,k.v0)(I),O=(0,D.ad)(I);class T{constructor(){}getItem(e){return localStorage.getItem(e)}getKey(e,t){return JSON.parse(localStorage.getItem(e))[t]}removeItem(e){localStorage.removeItem(e)}isExpired(e){let t=new Date(this.getKey(e,"expire")).toLocaleString("sv"),n=(new Date).toLocaleString("sv");return n>t}setItem(e,t,n){localStorage.setItem(e,JSON.stringify({value:t,expire:this.expireDate(n)}))}expireDate(e){return e=e.split(/(\D+|\d+)/g).filter((e=>""!=e)),this.parseToDateFromNow(e[0],e[1]).toLocaleString("sv")}parseToDateFromNow(e,t){let n=new Date;switch(e=Number.parseInt(e),t){case"s":n.setSeconds(n.getSeconds()+e);break;case"m":n.setMinutes(n.getMinutes()+e);break;case"h":n.setHours(n.setHours()+e);break;case"D":n.setHours(n.getHours()+24*e);break;case"M":n.setMonth(n.getMonth()+e);break;case"Y":n.getFullYear(n.setFullYear()+e);break}return n}}var L=new T;class N{possibleTypes(e=""){const t=/^[0-9]+$/,n=/^-?\d+(?:[.,]\d+)?$/,r=/^(?:true|false|0|1)$/,a=/^(\d{4})-(\d{2})-(\d{2})\s+(\d{2}):(\d{2}):(\d{2})$/;let o=["STRING"];return t.test(e)&&o.push("INT"),n.test(e)&&o.push("FLOAT"),r.test(e.toLowerCase())&&o.push("BOOLEAN"),a.test(e)&&o.push("DATE"),o}}var F=new N,A={data(){return{products:[],isAdmin:!1}},mounted(){this.isUserAdmin(),this.getProducts()},methods:{async isUserAdmin(){P.onAuthStateChanged((e=>{null!==P.currentUser?e.getIdTokenResult(!0).then((e=>{this.isAdmin=!0===e.claims.admin})):this.isAdmin=!1}))},handleSubmit(e){if(this.isAdmin){let t=this.convertSubmitToProduct(e);this.saveProduct(t)}else te.push({name:"Login"})},convertSubmitToProduct(e){let t={};for(let n of e.target)"input"===n.localName&&(t[n.name]=n.value);return t},saveProduct(e){(0,D.pl)((0,D.JU)(O,"products",e.name),{name:e.name,description:e.description,price:e.price,stock:e.stock}).then((()=>{this.getProducts(!0)}))},getProducts(e=!1,t="name"){e||!L.getItem("products")||L.isExpired("products")?this.readFromDatabase(t):this.readFromLocalStorage(t)},readFromLocalStorage(e="name"){this.products=this.orderLocalStorage(e)},orderLocalStorage(e){let t=JSON.parse(L.getKey("products","value"));return t.sort(((t,n)=>this.isNumber(t[e])?this.evaluateHigher(Number.parseFloat(t[e]),Number.parseFloat(n[e])):t[e].localeCompare(n[e],"sv"))),console.log(t),t},isNumber(e){return F.possibleTypes(e).includes("INT")||F.possibleTypes(e).includes("FLOAT")},evaluateHigher(e,t){return e>t?1:e<t?-1:0},readFromDatabase(e="name"){let t=[];(0,D.PL)((0,D.IO)((0,D.hJ)(O,"products"),(0,D.Xo)(e))).then((e=>{e.forEach((e=>{t.push(e.data())})),this.products=t,L.setItem("products",JSON.stringify(this.products),"1h")}))}}};const C=(0,s.Z)(A,[["render",S],["__scopeId","data-v-a75c5e9e"]]);var H=C;const E=e=>((0,a.dD)("data-v-7fe0f50e"),e=e(),(0,a.Cn)(),e),j=E((()=>(0,a._)("header",null,null,-1))),K=E((()=>(0,a._)("h1",{class:"centralize"},"Login",-1))),Y=E((()=>(0,a._)("hr",null,null,-1))),M={class:"grid"},U=E((()=>(0,a._)("button",{type:"submit"},"Enviar",-1))),V=E((()=>(0,a._)("footer",null,null,-1)));function z(e,t,n,o,i,s){const u=(0,a.up)("CustomInput");return(0,a.wg)(),(0,a.iD)(a.HY,null,[j,(0,a._)("main",null,[(0,a._)("form",{onSubmit:t[0]||(t[0]=(0,r.iM)(((...t)=>e.handleSubmit&&e.handleSubmit(...t)),["prevent"]))},[K,Y,(0,a._)("div",M,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.inputs,((e,t)=>((0,a.wg)(),(0,a.j4)(u,{key:t,label:e.label,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,type:e.type},null,8,["label","modelValue","onUpdate:modelValue","type"])))),128))]),U],32)]),V],64)}const J=["for"],Z=["id","type"];function $(e,t,n,o,i,s){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("label",{for:e.label},(0,c.zw)(e.label),9,J),(0,a.wy)((0,a._)("input",{id:e.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.content=t),type:e.type},null,8,Z),[[r.YZ,e.content]])],64)}var R={props:{label:String,modelValue:String,type:String,placeholder:String},computed:{content:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}};const B=(0,s.Z)(R,[["render",$],["__scopeId","data-v-a7f8322e"]]);var G=B,q={data(){return{inputs:{email:{label:"Email",value:"",type:"email"},password:{label:"Password",value:"",type:"password"}}}},components:{CustomInput:G},methods:{handleSubmit(){this.tryToLogin(this.inputs.email.value,this.inputs.password.value)},tryToLogin(e,t){(0,k.e5)(P,e,t).then((()=>{te.push({name:"Home"})})).catch((e=>{"auth/user-not-found"==e.code||"auth/wrong-password"==e.code?alert("O Email ou a Senha est√£o incorretos."):alert("Ocorreu um erro. Tente novamente mais tarde.")}))}}};const W=(0,s.Z)(q,[["render",z],["__scopeId","data-v-7fe0f50e"]]);var X=W;const Q=[{path:"/",name:"Home",component:H},{path:"/login",name:"Login",component:X}],ee=(0,d.p7)({history:(0,d.PO)("/vue-plus-firebase/"),routes:Q});var te=ee;(0,r.ri)(l).use(te).mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,o){if(!r){var i=1/0;for(d=0;d<e.length;d++){r=e[d][0],a=e[d][1],o=e[d][2];for(var s=!0,u=0;u<r.length;u++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[u])}))?r.splice(u--,1):(s=!1,o<i&&(i=o));if(s){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/vue-plus-firebase/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,i=r[0],s=r[1],u=r[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)var d=u(n)}for(t&&t(r);l<i.length;l++)o=i[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},r=self["webpackChunkvue_auth"]=self["webpackChunkvue_auth"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(4371)}));r=n.O(r)})();
//# sourceMappingURL=app.ef1c263f.js.map