(function(){"use strict";var e={2671:function(e,t,n){var r=n(9242),o=n(3396);function a(e,t,n,r,a,i){const u=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(u)}var i={name:"App"},u=n(89);const l=(0,u.Z)(i,[["render",a]]);var s=l,d=n(2483),c=n(7139),p=n.p+"img/Reload.6948dd5d.svg";const m=e=>((0,o.dD)("data-v-30063220"),e=e(),(0,o.Cn)(),e),h={class:"container"},v=(0,o.uE)('<table data-v-30063220><tr data-v-30063220><td data-v-30063220><input type="text" placeholder="Name" name="name" data-v-30063220></td><td data-v-30063220><input type="text" placeholder="Description" name="description" data-v-30063220></td><td data-v-30063220><input type="number" placeholder="Price" name="price" min="0" step=".01" data-v-30063220></td><td data-v-30063220><input type="number" placeholder="Stock" name="stock" min="0" data-v-30063220></td></tr></table><button type="submit" data-v-30063220>Save</button>',2),f=[v],g=m((()=>(0,o._)("div",{class:"marginTop30"},null,-1))),b={class:"reloadButton"},w={id:"showProducts"},y=m((()=>(0,o._)("tr",null,[(0,o._)("th",null,"Name"),(0,o._)("th",null,"Description"),(0,o._)("th",null,"Price"),(0,o._)("th",null,"Stock")],-1))),_=m((()=>(0,o._)("footer",null,null,-1)));function S(e,t,n,a,i,u){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("header",null,[(0,o.Wm)(l,{to:"/login"},{default:(0,o.w5)((()=>[(0,o.Uk)("Login")])),_:1})]),(0,o._)("main",null,[(0,o._)("div",h,[e.isAdmin?((0,o.wg)(),(0,o.iD)("form",{key:0,id:"createEntry",onSubmit:t[0]||(t[0]=(0,r.iM)(((...t)=>e.handleSubmit&&e.handleSubmit(...t)),["prevent"]))},f,32)):(0,o.kq)("",!0),g,(0,o._)("button",b,[(0,o._)("img",{src:p,title:"Reload products",alt:"Reload all products from table",onClick:t[1]||(t[1]=t=>e.getProducts(!0))})]),(0,o._)("table",w,[y,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.products,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",null,(0,c.zw)(e.name),1),(0,o._)("td",null,(0,c.zw)(e.description),1),(0,o._)("td",null,"$"+(0,c.zw)(Number.parseFloat(e.price).toFixed(2).toString()),1),(0,o._)("td",null,(0,c.zw)(e.stock),1)])))),128))])])]),_],64)}n(7658);var k=n(7795),D=n(3854),I=n(36);const O={apiKey:"AIzaSyDoiLi4udd54j5D667BinmxdlG3Ed9-hJ0",authDomain:"portfolio-a9d90.firebaseapp.com",projectId:"portfolio-a9d90",storageBucket:"portfolio-a9d90.appspot.com",messagingSenderId:"2268230381",appId:"1:2268230381:web:3cf52911ac68e35a1a12e4"},P=(0,k.ZF)(O),x=(0,D.v0)(P),L=(0,I.ad)(P);class F{constructor(){}getItem(e){return localStorage.getItem(e)}getKey(e,t){return JSON.parse(localStorage.getItem(e))[t]}removeItem(e){localStorage.removeItem(e)}isExpired(e){let t=new Date(this.getKey(e,"expire")).toLocaleString("sv"),n=(new Date).toLocaleString("sv");return n>t}setItem(e,t,n){localStorage.setItem(e,JSON.stringify({value:t,expire:this.expireDate(n)}))}expireDate(e){return e=e.split(/(\D+|\d+)/g).filter((e=>""!=e)),this.parseToDateFromNow(e[0],e[1]).toLocaleString("sv")}parseToDateFromNow(e,t){let n=new Date;switch(e=Number.parseInt(e),t){case"s":n.setSeconds(n.getSeconds()+e);break;case"m":n.setMinutes(n.getMinutes()+e);break;case"h":n.setHours(n.setHours()+e);break;case"D":n.setHours(n.getHours()+24*e);break;case"M":n.setMonth(n.getMonth()+e);break;case"Y":n.getFullYear(n.setFullYear()+e);break}return n}}var A=new F,H={data(){return{products:[],isAdmin:!1}},mounted(){this.isUserAdmin(),this.getProducts()},methods:{async isUserAdmin(){x.onAuthStateChanged((e=>{null!==x.currentUser?e.getIdTokenResult(!0).then((e=>{this.isAdmin=!0===e.claims.admin})):this.isAdmin=!1}))},handleSubmit(e){if(this.isAdmin){let t=this.convertSubmitToProduct(e);this.saveProduct(t)}else ee.push({name:"Login"})},getProducts(e=!1){e||!A.getItem("products")||A.isExpired("products")?(this.readFromDatabase(),console.log("A")):this.readFromLocalStorage()},readFromLocalStorage(){this.products=JSON.parse(A.getKey("products","value"))},readFromDatabase(){let e=[];(0,I.PL)((0,I.hJ)(L,"products")).then((t=>{t.forEach((t=>{e.push(t.data())})),this.products=e,A.setItem("products",JSON.stringify(this.products),"1h")}))},convertSubmitToProduct(e){let t={};for(let n of e.target)"input"===n.localName&&(t[n.name]=n.value);return t},saveProduct(e){(0,I.pl)((0,I.JU)(L,"products",e.name),{name:e.name,description:e.description,price:e.price,stock:e.stock}).then((()=>{this.getProducts()}))}}};const N=(0,u.Z)(H,[["render",S],["__scopeId","data-v-30063220"]]);var T=N;const j=e=>((0,o.dD)("data-v-7fe0f50e"),e=e(),(0,o.Cn)(),e),E=j((()=>(0,o._)("header",null,null,-1))),Y=j((()=>(0,o._)("h1",{class:"centralize"},"Login",-1))),C=j((()=>(0,o._)("hr",null,null,-1))),M={class:"grid"},U=j((()=>(0,o._)("button",{type:"submit"},"Enviar",-1))),V=j((()=>(0,o._)("footer",null,null,-1)));function z(e,t,n,a,i,u){const l=(0,o.up)("CustomInput");return(0,o.wg)(),(0,o.iD)(o.HY,null,[E,(0,o._)("main",null,[(0,o._)("form",{onSubmit:t[0]||(t[0]=(0,r.iM)(((...t)=>e.handleSubmit&&e.handleSubmit(...t)),["prevent"]))},[Y,C,(0,o._)("div",M,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.inputs,((e,t)=>((0,o.wg)(),(0,o.j4)(l,{key:t,label:e.label,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,type:e.type},null,8,["label","modelValue","onUpdate:modelValue","type"])))),128))]),U],32)]),V],64)}const J=["for"],K=["id","type"];function Z(e,t,n,a,i,u){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("label",{for:e.label},(0,c.zw)(e.label),9,J),(0,o.wy)((0,o._)("input",{id:e.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.content=t),type:e.type},null,8,K),[[r.YZ,e.content]])],64)}var R={props:{label:String,modelValue:String,type:String,placeholder:String},computed:{content:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}};const B=(0,u.Z)(R,[["render",Z],["__scopeId","data-v-a7f8322e"]]);var $=B,q={data(){return{inputs:{email:{label:"Email",value:"",type:"email"},password:{label:"Password",value:"",type:"password"}}}},components:{CustomInput:$},methods:{handleSubmit(){this.tryToLogin(this.inputs.email.value,this.inputs.password.value)},tryToLogin(e,t){(0,D.e5)(x,e,t).then((()=>{ee.push({name:"Home"})})).catch((e=>{"auth/user-not-found"==e.code||"auth/wrong-password"==e.code?alert("O Email ou a Senha est√£o incorretos."):alert("Ocorreu um erro. Tente novamente mais tarde.")}))}}};const G=(0,u.Z)(q,[["render",z],["__scopeId","data-v-7fe0f50e"]]);var W=G;const Q=[{path:"/",name:"Home",component:T},{path:"/login",name:"Login",component:W}],X=(0,d.p7)({history:(0,d.PO)("/vue-plus-firebase/"),routes:Q});var ee=X;(0,r.ri)(s).use(ee).mount("#app")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,a){if(!r){var i=1/0;for(d=0;d<e.length;d++){r=e[d][0],o=e[d][1],a=e[d][2];for(var u=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(u=!1,a<i&&(i=a));if(u){e.splice(d--,1);var s=o();void 0!==s&&(t=s)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/vue-plus-firebase/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,i=r[0],u=r[1],l=r[2],s=0;if(i.some((function(t){return 0!==e[t]}))){for(o in u)n.o(u,o)&&(n.m[o]=u[o]);if(l)var d=l(n)}for(t&&t(r);s<i.length;s++)a=i[s],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},r=self["webpackChunkvue_auth"]=self["webpackChunkvue_auth"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(2671)}));r=n.O(r)})();
//# sourceMappingURL=app.819bf800.js.map